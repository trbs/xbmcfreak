<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<refentry lang="en">
<refmeta>
<refentrytitle>live-snapshot</refentrytitle>
<manvolnum>1</manvolnum>
</refmeta>
<refnamediv>
    <refname>live-snapshot</refname>
    <refpurpose>a simple script to ease persistence usage</refpurpose>
</refnamediv>
<refsynopsisdiv>
<simpara>live-snapshot [-c|--cow <emphasis role="strong">DIRECTORY</emphasis>s] [-d|--device <emphasis role="strong">DEVICE</emphasis>] [-e|--exclude-list <emphasis role="strong">FILE</emphasis>] [-o|--output <emphasis role="strong">FILE</emphasis>] [-t|--type <emphasis role="strong">TYPE</emphasis>]</simpara>

<simpara>live-snapshot [-r|--resync-string <emphasis role="strong">STRING</emphasis>]</simpara>

<simpara>live-snapshot [-h|--help]</simpara>

<simpara>live-snapshot [-u|--usage]</simpara>

<simpara>live-snapshot [-v|--version]</simpara>

</refsynopsisdiv>
<refsect1 id="_description">
<title>Description</title>
<simpara>live-snapshot is a script which can be used to build the right types of
persistent image files supported by live-initramfs(7). It is also used on
exit by the live-initramfs init script to resync the boot-found snapshots
devices.</simpara>

</refsect1>
<refsect1 id="_options">
<title>Options</title>
<variablelist>
<varlistentry>
<term>
-c, --cow <emphasis role="strong">DIRECTORY</emphasis>
</term>
<listitem>
<simpara>
specifies the input directory to be cloned in the image file. Its default value
"/live/cow" should be right for most uses. However it could be handy to specify
"/home" and type ext2 for the type to prepare an image file suited to be
directly mounted by live-initramfs as home.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-d, --device <emphasis role="strong">DEVICE</emphasis>
</term>
<listitem>
<simpara>
sets the device where the media which the snapshot/persistence file/partition
will be put. If it is not specified, a tmpfs will be used and linked to the
user's desktop to move it where it is needed. If the device has no filesystem,
an ext2 fs will be automatically created and labelled according to the values
specified after the "--output" value or with a sane default.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-e, --exclude-list <emphasis role="strong">FILE</emphasis>
</term>
<listitem>
<simpara>
a file containing a list of filenames/paths that should not be saved. This exclude list will be remebered on the target snapshot media for reuse.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-o, --output <emphasis role="strong">FILE</emphasis>
</term>
<listitem>
<simpara>
the filename/label used for the output file/partition. If left blank, live-snapshot will search for a proper file on the device or use the whole partition.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-r, --resync-string <emphasis role="strong">STRING</emphasis>
</term>
<listitem>
<simpara>
internally used on resyncs.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-f, --refresh
</term>
<listitem>
<simpara>
try to do the same operation that should be done at reboot or halt, resyncing
boot-time auto discovered snapshots. Useful to prevent a crash or surge
power-off.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-t, --type <emphasis role="strong">TYPE</emphasis>
</term>
<listitem>
<simpara>
Type could be one of "cpio", "squashfs", "ext2", "ext3", "ext4", or "jffs2".
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-h, --help
</term>
<listitem>
<simpara>
display help and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-u, --usage
</term>
<listitem>
<simpara>
show usage and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
-v, --version
</term>
<listitem>
<simpara>
output version information and exit
</simpara>
</listitem>
</varlistentry>
</variablelist>
</refsect1>
<refsect1 id="_files">
<title>Files</title>
<literallayout class="monospaced">/etc/live-snapshot.list</literallayout>
<simpara>This optional file, if present changes the behaviour of live-snapshot, only files and directories listed there are included (integrally) in the snapshot. It works only for cpio and whole partition targets.</simpara>

<literallayout class="monospaced">/etc/live-snapshot.exclude_list</literallayout>
<simpara>This optional file, if present will filter the files that will be saved by live-snapshot removing (as in "grep -F -v") all filenames that will be matched by strings listed in it.
It works for cpio, whole partition and squashfs snapshot types only; it is pretty useful for filtering temporary files and disk caches.</simpara>

</refsect1>
<refsect1 id="_see_also">
<title>See also</title>
<simpara>live-initramfs(8)</simpara>

<simpara>This program is a part of live-initramfs.</simpara>

</refsect1>
<refsect1 id="_bugs">
<title>Bugs</title>
<simpara>Report bugs against live-initramfs
<ulink url="http://packages.qa.debian.org/live-initramfs">http://packages.qa.debian.org/live-initramfs</ulink>.</simpara>

</refsect1>
<refsect1 id="_homepage">
<title>Homepage</title>
<simpara>More information about the Debian Live project can be found at
<ulink url="http://debian-live.alioth.debian.org/">http://debian-live.alioth.debian.org/</ulink> and
<ulink url="http://wiki.debian.org/DebianLive/">http://wiki.debian.org/DebianLive/</ulink>.</simpara>

</refsect1>
<refsect1 id="_authors">
<title>Authors</title>
<simpara>live-initramfs is maintained by Daniel Baumann &lt;daniel@debian.org&gt; for the
Debian project. live-initramfs is a fork of
<ulink url="http://packages.ubuntu.com/casper/">casper</ulink>. casper was originally written
by Tollef Fog Heen &lt;tfheen@canonical.com&gt; and Matt Zimmerman &lt;mdz@canonical.com&gt;.</simpara>

</refsect1>
</refentry>
